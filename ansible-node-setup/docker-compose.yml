version: '3'

services:
    node:
        build:
            context: .
            args:
                SSH_MASTER_USER: ${SSH_MASTER_USER}
                SSH_MASTER_PASS: ${SSH_MASTER_PASS}
        hostname: node
        container_name: node
        restart: always

        ports:
            - "2222:22"
    node1:
       build:
           context: .
           args:
               SSH_MASTER_USER: ${SSH_MASTER_USER}
               SSH_MASTER_PASS: ${SSH_MASTER_PASS}
       hostname: node1
       container_name: node1
       restart: always

       ports:
           - "1222:22"
    db:
       build:
           context: .
           args:
               SSH_MASTER_USER: ${SSH_MASTER_USER}
               SSH_MASTER_PASS: ${SSH_MASTER_PASS} 
       hostname: db
       container_name: db
       restart: always
       ports:
           - "8222:22"
           - "8008:80"
           - "8000:8000"
           - "8001:8080"
           - "3306:3306"
    lb:
       build:
           context: .
           args:
               SSH_MASTER_USER: ${SSH_MASTER_USER}
               SSH_MASTER_PASS: ${SSH_MASTER_PASS}
       hostname: lb
       container_name: lb
       restart: always
       ports:
           - "5222:22"
           - "5008:80"
           - "5000:8000"
           - "5001:8080"

